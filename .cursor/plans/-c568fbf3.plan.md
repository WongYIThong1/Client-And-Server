<!-- c568fbf3-154d-417a-a014-4af882520eb1 23f7b809-ad67-40d4-9c6c-594decac6bf7 -->
# 计划

## 1. 调试配置入口

- 在 [`client/main.go`](client/main.go) 增加 `--debug` 或环境变量（如 `CLIENT_DEBUG=1`）解析结果，写入全局 `config.DebugEnabled`。
- 若已保存 API Key，可在启动时提示当前调试模式状态。

## 2. 日志设施封装

- 新建 [`client/debug/logger.go`](client/debug/logger.go)，封装 `Debugf/TraceTask/HTTPTrace` 等函数，内部根据 `DebugEnabled` 决定是否输出，并统一前缀/颜色。
- 支持输出到 stdout，并保留写文件钩子（后续可扩展）。

## 3. 关键路径埋点

- 在 [`client/tasks/runner.go`](client/tasks/runner.go)、[`client/tasks/crawler/crawler.go`](client/tasks/crawler/crawler.go)、[`client/tasks/wafdetect/detector.go`](client/tasks/wafdetect/detector.go) 中增加调试日志：
- 任务开始/结束、worker/thread/timeout 配置；
- 每轮批次结果汇总（节流，以免刷屏）；
- HTTP 请求错误/重试细节（仅在 debug 时打印）。
- 在 [`client/connection/handler.go`](client/connection/handler.go) 中记录服务器消息、任务更新 ack 情况。

## 4. 文档与使用说明

- 更新 [`client/README.md`](client/README.md)，描述如何开启调试模式、期望输出示例、注意事项。